<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seoul Tree Management System - AI-Powered Tree Care</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
</head>
<body>
    <header>
        <nav>
            <div class="logo">üå≥ Seoul Tree System</div>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#map">Tree Map</a></li>
                <li><a href="#request">Emergency Service</a></li>
                <li><a href="#features">Features</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
            <button class="cta-button-small">Report Emergency</button>
        </nav>
    </header>

    <main>
        <!-- Hero Section -->
        <section id="home" class="hero">
            <div class="hero-content">
                <h1>Seoul Tree Management System</h1>
                <p>AI-powered platform for monitoring, managing, and protecting Seoul's urban forest ecosystem.</p>
                <div class="hero-buttons">
                    <button class="cta-button" onclick="scrollToMap()">Explore Tree Map</button>
                    <button class="secondary-button" onclick="scrollToRequest()">Report Emergency</button>
                </div>
                <div id="message" class="message"></div>
            </div>
            <div class="hero-image">
                <div class="hero-placeholder">üå≥</div>
            </div>
        </section>

        <!-- Stats Section -->
        <section class="stats">
            <div class="stat-item">
                <h3 class="stat-number">850+</h3>
                <p>Trees Monitored</p>
            </div>
            <div class="stat-item">
                <h3 class="stat-number">25</h3>
                <p>Districts Covered</p>
            </div>
            <div class="stat-item">
                <h3 class="stat-number">92%</h3>
                <p>Health Score</p>
            </div>
            <div class="stat-item">
                <h3 class="stat-number">24/7</h3>
                <p>Emergency Service</p>
            </div>
        </section>

        <!-- Interactive Tree Map Section -->
        <section id="map" class="map-section">
            <h2>Interactive Tree Map</h2>
            <p class="section-subtitle">Explore 850+ trees across Seoul's 25 districts</p>

            <div class="map-controls">
                <input type="text" id="searchAddress" class="search-input" placeholder="Search by address (e.g., Gangnam-gu)...">
                <select id="healthFilter" class="filter-select">
                    <option value="all">All Health Levels</option>
                    <option value="excellent">Excellent (9-10)</option>
                    <option value="good">Good (7-8)</option>
                    <option value="fair">Fair (5-6)</option>
                    <option value="poor">Poor (1-4)</option>
                </select>
            </div>

            <div id="treeMap" class="tree-map"></div>

            <div class="map-legend">
                <h4>Health Status</h4>
                <div class="legend-items">
                    <div class="legend-item">
                        <span class="legend-marker excellent"></span>
                        <span>Excellent (9-10)</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-marker good"></span>
                        <span>Good (7-8)</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-marker fair"></span>
                        <span>Fair (5-6)</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-marker poor"></span>
                        <span>Poor (1-4)</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Emergency Service Request Section -->
        <section id="request" class="request-section">
            <h2>Emergency Service Request</h2>
            <p class="section-subtitle">Report tree emergencies 24/7</p>

            <div class="request-container">
                <form id="emergencyForm" class="emergency-form">
                    <div class="form-group">
                        <label>Emergency Type *</label>
                        <select id="emergencyType" required>
                            <option value="">Select emergency type...</option>
                            <option value="fallen">Fallen or Leaning Tree</option>
                            <option value="branch">Branch Hazard</option>
                            <option value="root">Root Damage</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Name *</label>
                            <input type="text" id="contactName" placeholder="Kim Min-jun (Demo)" required>
                        </div>
                        <div class="form-group">
                            <label>Email *</label>
                            <input type="email" id="contactEmail" placeholder="demo.user@example.com" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Phone *</label>
                        <input type="tel" id="contactPhone" placeholder="010-1234-5678" pattern="[0-9]{3}-[0-9]{4}-[0-9]{4}" required>
                    </div>

                    <div class="form-group">
                        <label>Address *</label>
                        <input type="text" id="locationAddress" placeholder="456 Teheran-ro, Gangnam-gu, Seoul" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>District *</label>
                            <select id="district" required>
                                <option value="">Select district...</option>
                                <option value="Gangnam-gu">Gangnam-gu (Í∞ïÎÇ®Íµ¨)</option>
                                <option value="Jongno-gu">Jongno-gu (Ï¢ÖÎ°úÍµ¨)</option>
                                <option value="Jung-gu">Jung-gu (Ï§ëÍµ¨)</option>
                                <option value="Mapo-gu">Mapo-gu (ÎßàÌè¨Íµ¨)</option>
                                <option value="Songpa-gu">Songpa-gu (ÏÜ°ÌååÍµ¨)</option>
                                <option value="Seocho-gu">Seocho-gu (ÏÑúÏ¥àÍµ¨)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Cross Streets</label>
                            <input type="text" id="crossStreets" placeholder="Near intersection with...">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Landmarks / Special Instructions</label>
                        <textarea id="landmarks" rows="2" placeholder="Across from COEX Mall, near bus stop #23"></textarea>
                    </div>

                    <div class="form-group">
                        <label>Description *</label>
                        <textarea id="description" rows="4" placeholder="Describe the emergency situation..." required></textarea>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="secondary-button" onclick="generateFakeData()">Generate Demo Data</button>
                        <button type="submit" class="cta-button">Submit Request</button>
                    </div>

                    <div id="requestConfirmation" class="request-confirmation hidden">
                        <h3>‚úÖ Request Submitted!</h3>
                        <p>Request ID: <strong id="requestId"></strong></p>
                        <p>We'll respond to your emergency within 2 hours.</p>
                    </div>
                </form>

                <div class="emergency-info">
                    <h3>Emergency Types</h3>
                    <div class="emergency-type-card">
                        <h4>üå≤ Fallen or Leaning Tree</h4>
                        <p><strong>Priority:</strong> Critical</p>
                        <p>Trees that have fallen or are dangerously leaning</p>
                        <p><strong>Response:</strong> Immediate assessment</p>
                    </div>
                    <div class="emergency-type-card">
                        <h4>üåø Branch Hazard</h4>
                        <p><strong>Priority:</strong> High</p>
                        <p>Broken, hanging, or dead branches</p>
                        <p><strong>Response:</strong> Same-day inspection</p>
                    </div>
                    <div class="emergency-type-card">
                        <h4>üå± Root Damage</h4>
                        <p><strong>Priority:</strong> Medium</p>
                        <p>Roots damaging infrastructure</p>
                        <p><strong>Response:</strong> Within 1-2 weeks</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section id="features" class="features">
            <h2>System Features</h2>
            <p class="section-subtitle">Advanced technology for comprehensive tree management</p>

            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-icon">üó∫Ô∏è</div>
                    <h3>Interactive Mapping</h3>
                    <p>Real-time visualization of 850+ trees across Seoul with detailed health metrics.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ü§ñ</div>
                    <h3>AI Assistant</h3>
                    <p>Get instant answers and customize this page using our AI chat widget.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üìä</div>
                    <h3>Health Monitoring</h3>
                    <p>Track tree health scores, hazard ratings, and maintenance needs in real-time.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">‚ö°</div>
                    <h3>Emergency Response</h3>
                    <p>24/7 emergency service request system with priority-based response times.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üîç</div>
                    <h3>Advanced Search</h3>
                    <p>Search trees by location, species, health status, and more.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üì±</div>
                    <h3>Mobile Optimized</h3>
                    <p>Access the tree management system from any device, anywhere.</p>
                </div>
            </div>
        </section>


        <!-- Contact Section -->
        <section id="contact" class="contact">
            <h2>Contact Us</h2>
            <p class="section-subtitle">Questions about tree management? We're here to help!</p>

            <div class="contact-container">
                <div class="contact-info">
                    <div class="contact-item">
                        <div class="contact-icon">üìß</div>
                        <div>
                            <h4>Email</h4>
                            <p>support@seoultrees.go.kr</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">üìû</div>
                        <div>
                            <h4>Emergency Hotline</h4>
                            <p>1588-0000 (24/7)</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">üìç</div>
                        <div>
                            <h4>Office</h4>
                            <p>Seoul Metropolitan Government<br>110 Sejong-daero, Jung-gu, Seoul</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">‚è∞</div>
                        <div>
                            <h4>Office Hours</h4>
                            <p>Mon-Fri: 9:00 AM - 6:00 PM<br>Emergency: 24/7</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="cta-section">
            <h2>Help Us Protect Seoul's Urban Forest</h2>
            <p>Report tree emergencies and explore the interactive map to learn about trees in your neighborhood</p>
            <button class="cta-button" onclick="scrollToRequest()">Report Emergency Now</button>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h4>üå≥ Seoul Tree System</h4>
                <p>AI-powered platform for protecting Seoul's urban forest.</p>
            </div>
            <div class="footer-section">
                <h4>Services</h4>
                <ul>
                    <li><a href="#map">Tree Map</a></li>
                    <li><a href="#request">Emergency Service</a></li>
                    <li><a href="#features">Features</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Information</h4>
                <ul>
                    <li><a href="#contact">Contact</a></li>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Emergency</h4>
                <ul>
                    <li>Hotline: 1588-0000</li>
                    <li>24/7 Service</li>
                    <li><a href="#request">Report Now</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Seoul Metropolitan Government. All rights reserved.</p>
        </div>
    </footer>

    <!-- Chat Widget -->
    <div id="chatWidget" class="chat-widget">
        <!-- Username Modal -->
        <div id="usernameModal" class="username-modal hidden">
            <div class="modal-backdrop"></div>
            <div class="modal-content">
                <h2>Welcome to BuildRight!</h2>
                <p>What should we call you?</p>
                <input type="text" id="usernameInput" placeholder="Enter your name" autofocus>
                <button onclick="setUsername()" class="modal-button">Get Started</button>
            </div>
        </div>

        <!-- Chat Button -->
        <button id="chatButton" class="chat-button" onclick="toggleChat()">
            <span class="chat-icon">üí¨</span>
            <span class="chat-badge" id="chatBadge" style="display: none;">1</span>
        </button>

        <!-- Chat Panel -->
        <div id="chatPanel" class="chat-panel hidden">
            <div class="chat-header">
                <div class="chat-header-content">
                    <h3>ü§ñ AI Assistant</h3>
                    <span class="chat-status" id="chatStatus">
                        <span class="status-dot disconnected"></span>
                        Connecting...
                    </span>
                </div>
                <button class="close-button" onclick="toggleChat()">‚úï</button>
            </div>

            <!-- Preview Notification -->
            <div id="previewNotification" class="preview-notification hidden">
                <div class="preview-content">
                    <p><strong>üéâ Preview Ready!</strong></p>
                    <p>Your changes are ready to view.</p>
                    <div class="preview-actions-row">
                        <button onclick="viewPreview()" class="preview-btn">View Preview</button>
                        <button onclick="submitForApproval()" class="submit-button">Submit for Approval</button>
                    </div>
                </div>
            </div>

            <div class="chat-messages" id="chatMessages">
                <div class="message assistant">
                    <p>Hi! I'm your AI assistant for the Seoul Tree Management System. I can help you:</p>
                    <ul>
                        <li>Navigate the tree map</li>
                        <li>Find information about trees</li>
                        <li>Customize this website</li>
                        <li>Answer questions about tree care</li>
                    </ul>
                    <p>How can I assist you today?</p>
                </div>
            </div>

            <div class="chat-input-container">
                <textarea
                    id="chatInput"
                    class="chat-input"
                    placeholder="Ask me to modify the website..."
                    rows="1"
                    onkeydown="handleChatKeydown(event)"
                ></textarea>
                <div class="chat-input-actions">
                    <button id="sendButton" class="send-button" onclick="sendChatMessage()">
                        <span>Send</span>
                    </button>
                    <button id="cancelButton" class="cancel-button hidden" onclick="cancelChatMessage()">
                        <span>Cancel</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Preview Modal -->
    <div id="previewModal" class="preview-modal hidden">
        <div class="preview-modal-backdrop" onclick="closePreview()"></div>
        <div class="preview-modal-content">
            <div class="preview-modal-header">
                <h3>üìã Preview - <span id="previewBranchName"></span></h3>
                <button class="close-button-modal" onclick="closePreview()">‚úï</button>
            </div>
            <iframe id="previewFrame" class="preview-frame"></iframe>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
    <script src="script.js"></script>
</body>
</html>
